// app/api/invoice/route.ts or pages/api/invoice.ts
import { NextResponse } from "next/server";
import { db } from "../lib/db";
import puppeteer from "puppeteer";

export async function POST(req: Request) {
  try {
    const body = await req.json();
    const {
      invoiceNumber,
      billingDate,
      clientName,
      clientGST,
      clientAddress,
      jobDescription,
      amount,
      extraNotes,
      gstApplied,
    } = body;

    // Validate required fields
    if (!invoiceNumber || !billingDate || !clientName || !clientGST || !clientAddress || !amount) {
      return NextResponse.json({ error: "Missing required fields" }, { status: 400 });
    }

    // Parse numeric amount
    const numericAmount = typeof amount === "string" ? parseFloat(amount) : amount;
    if (isNaN(numericAmount)) {
      return NextResponse.json({ error: "Amount must be a number" }, { status: 400 });
    }

    // Calculate GST
    const cgst = gstApplied ? numericAmount * 0.09 : 0;
    const sgst = gstApplied ? numericAmount * 0.09 : 0;
    const totalAmount = numericAmount + cgst + sgst;

    // Save invoice to DB (optional)
    await db.invoices.create({
      invoiceNumber,
      billingDate: new Date(billingDate),
      clientName,
      clientGST,
      clientAddress,
      jobDescription,
      amount: numericAmount,
      cgstAmount: cgst,
      sgstAmount: sgst,
      totalAmount,
      gstApplied,
      extraNotes,
      createdAt: new Date(),
    });

    // --- LOGIC FOR BANK VS QR ---

    // 1. Bank Details HTML
    const bankDetailsHtml = `
      <div class="bank-details">
        <div style="font-weight: bold; font-size: 14px; margin-bottom: 5px;">Bank Details</div>
        <div>Bank: AXIS BANK</div>
        <div>IFSC Code: UTIB0000751</div>
        <div>Account Number: 920020017276134</div>
      </div>
    `;

    // 2. QR Code SVG HTML (Standard generic QR path)
    // Note: You can replace the path d="..." below with your specific UPI QR SVG path
    const qrCodeHtml = `
      <div class="qr-details" style="margin-top: 40px;">
        <div style="font-weight: bold; font-size: 14px; margin-bottom: 10px;">Scan to Pay</div>
        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:xodm="http://www.corel.com/coreldraw/odm/2003" xml:space="preserve" width="12.3485in" height="3.13047in" version="1.1" style="shape-rendering:geometricPrecision; text-rendering:geometricPrecision; image-rendering:optimizeQuality; fill-rule:evenodd; clip-rule:evenodd" viewBox="0 0 242088.19 61371.94">
 <defs>
  <style type="text/css">
   <![CDATA[
    .fil8 {fill:#FEFEFE}
    .fil0 {fill:black;fill-rule:nonzero}
    .fil2 {fill:url(#id0);fill-rule:nonzero}
    .fil5 {fill:url(#id1);fill-rule:nonzero}
    .fil7 {fill:url(#id2);fill-rule:nonzero}
    .fil6 {fill:url(#id3);fill-rule:nonzero}
    .fil3 {fill:url(#id4);fill-rule:nonzero}
    .fil1 {fill:url(#id5);fill-rule:nonzero}
    .fil4 {fill:url(#id6);fill-rule:nonzero}
   ]]>
  </style>
  <linearGradient id="id0" gradientUnits="userSpaceOnUse" x1="197532.14" y1="55179.17" x2="204448.97" y2="-1733.55">
   <stop offset="0" style="stop-opacity:1; stop-color:#F58634"/>
   <stop offset="1" style="stop-opacity:1; stop-color:#ED3237"/>
  </linearGradient>
  <linearGradient id="id1" gradientUnits="userSpaceOnUse" xlink:href="#id0" x1="233727.1" y1="26366.53" x2="233941.91" y2="18086.72">
  </linearGradient>
  <linearGradient id="id2" gradientUnits="userSpaceOnUse" xlink:href="#id0" x1="240830.33" y1="21669.82" x2="240907.44" y2="18696.7">
  </linearGradient>
  <linearGradient id="id3" gradientUnits="userSpaceOnUse" xlink:href="#id0" x1="233045.26" y1="33341.63" x2="233159.42" y2="28937.99">
  </linearGradient>
  <linearGradient id="id4" gradientUnits="userSpaceOnUse" xlink:href="#id0" x1="219737.38" y1="54183.96" x2="220840.42" y2="9282.67">
  </linearGradient>
  <linearGradient id="id5" gradientUnits="userSpaceOnUse" xlink:href="#id0" x1="174774.41" y1="68220.77" x2="177022.16" y2="5282.31">
  </linearGradient>
  <linearGradient id="id6" gradientUnits="userSpaceOnUse" xlink:href="#id0" x1="48877.96" y1="20102.22" x2="49554.71" y2="-5120.84">
  </linearGradient>
 </defs>
 <g id="Layer_x0020_1">
  <metadata id="CorelCorpID_0Corel-Layer"/>
  <g id="_1950916508832">
   <path class="fil0" d="M-0 49277.39m45482.49 -39702.43c-2043.52,0 -3386.29,1050.93 -4086.88,3094.45l-6013.85 24872.48 -5721.79 -27966.94 -8641.11 0 -5838.49 27966.94 -6714.45 -27966.94 -8465.91 0 11326.88 39702.43 7823.66 0 6188.83 -30419.07 6130.63 30419.07 7765.39 0 11268.37 -39702.43 -5021.27 0z"/>
   <path class="fil0" d="M66263.31 49286.03m26332.03 0l0 -18158.03c58.27,-8816.24 -4262.24,-13195.19 -13078.49,-13195.19 -8816.24,0 -13253.54,4378.95 -13253.54,13195.19l0 18158.03 7882.09 0 0 -19734.44c58.43,-3211.23 1809.96,-4787.63 5254.75,-4787.63 3444.79,0 5196.25,1576.4 5371.45,4787.63l0 15881.03c0,2452.13 1284.49,3678.27 3853.4,3853.4l3970.34 0z"/>
   <path class="fil0" d="M96098.79 49286.03m4028.61 -39702.43l-4028.61 0 0 39702.43 7765.31 0 0 -11268.37c0,-817.45 408.69,-1343 1226.14,-1518.05 992.43,0 1985.09,875.73 2977.67,2627.41l5488.23 10159.01 9341.79 0 -10801.33 -18333.16 10684.56 -11443.66 -9341.79 0 -9575.27 10976.54 0 -17106.94c0,-2043.6 -1693.1,-3795.21 -3736.7,-3795.21z"/>
   <path class="fil0" d="M122080.48 49286.03m27499.82 -9458.49l-5721.79 0c-1050.93,0 -1926.82,350.34 -2627.41,1109.36 -1517.97,1459.55 -3211.31,2218.73 -5021.19,2218.73 -3795.05,0 -5838.57,-2393.93 -6130.48,-7123.06l19967.99 0c583.82,-12085.9 -4028.69,-18099.76 -13837.51,-18099.76 -9400.06,58.43 -14129.42,5313.1 -14129.42,15822.53 0,10509.5 4670.86,15939.38 14012.64,16231.29 7590.18,0 11794,-3619.84 13487.18,-10159.09zm-13487.18 -15530.7c3327.93,0 5254.75,2102.02 5721.79,6188.91l-11618.79 0c583.82,-4086.88 2568.91,-6188.91 5897,-6188.91z"/>
   <path class="fil0" d="M153667.19 49286.03m4028.61 -39702.43l-4028.61 0 0 39702.43 7765.39 0 0 -35907.22c0,-2043.6 -1693.18,-3795.21 -3736.78,-3795.21z"/>
   <path class="fil1" d="M165811.68 49286.03m7765.39 8232.43c0,2568.91 -1284.57,3853.48 -3853.48,3853.48l-3911.91 0 0 -29543.19c408.69,-9225.09 5196.32,-13779.09 14479.61,-13779.09 9575.42,0 14363.06,5196.25 14363.06,15588.97 0,10509.43 -4087.04,15939.31 -12319.46,16231.22 -3853.48,0 -6772.73,-1576.4 -8757.82,-4787.63l0 12436.24zm6597.52 -14596.46c4203.82,0 6364.11,-2977.75 6539.24,-8933.02 0,-6247.34 -2218.73,-9341.79 -6655.95,-9341.79 -4437.3,0 -6539.24,3094.45 -6480.82,9341.79 233.48,5955.27 2393.7,8933.02 6597.52,8933.02z"/>
   <path class="fil2" d="M198274.18 49286.03m0 -39702.43l0 6072.21 7765.31 0 0 -2277c58.27,-2510.64 -1167.79,-3795.21 -3736.7,-3795.21l-4028.61 0zm0 8816.24l0 30886.18 7765.31 0 0 -27149.48c0,-2510.56 -1226.06,-3736.7 -3736.7,-3736.7l-4028.61 0z"/>
   <polygon class="fil3" points="225066.85,27063.19 225032.89,27121.16 219960.14,19470 219960.14,19470.16 219351.46,18400.24 210418.67,18400.24 219877.01,33463.43 209834.85,49286.03 219351.46,49286.03 224898.28,39477.51 230386.43,49286.03 239728.22,49286.03 "/>
   <path class="fil4" d="M48401.82 2376.1c-456.39,506.56 -132.06,1005.55 333.67,802.79 458.39,-199.98 301.63,-740.96 -333.67,-802.79zm9744.69 1163.01c-891.32,-400.12 -907.06,-148.27 -1490.88,-58.97 -1021.84,-1329.34 -1735.09,-1747.29 -3462.7,-2583.88 545.23,-1606.12 2014.65,-717.42 2986.16,72.24 825.02,670.73 1710.16,1834.89 1967.42,2570.61zm-8522.71 3135.98c424.36,-123.96 956.92,-620.94 1156.14,-1324.47 208.4,-736.41 -60.9,-1337.75 6.17,-1713.94 -135.38,1698.28 -342.46,3113.13 -2343.3,2830.95 -789.13,-111.22 -2743.88,-708.16 -3451.89,-1204.07 -203.15,-142.25 -290.98,-250.15 -469.82,-353.12 -576.72,-331.43 -475.61,32.19 -524.7,-544.76 -33.65,-398.42 -271.69,-541.91 -91.93,-802.94 497.53,-367.78 312.75,115.7 761.57,-367.55 1374.49,-1479.69 2950.97,-2651.34 5173.32,-2684.3 2677.74,-39.9 5410.35,1477.76 6883.64,3410.83 681.61,894.71 1149.19,2012.41 1349.94,3034.87 296.77,1510.95 162.01,2036.19 -341.54,3713.47 -195.51,652.2 -337.83,1324.01 -214.8,1905.28 186.17,880.67 2110.9,1813.74 1622.02,4672.01 -727.15,-428.45 -827.87,-1195.81 -1169.41,-1637.38 -504.63,468.74 -901.66,613.84 -1471.05,769.99 -1128.04,309.2 -924.12,636.69 -1355.58,972.05 -123.8,-601.11 -11.96,-1201.98 274.93,-1902.89l34.27 -83.51c518.29,-1265.27 1622.33,-2281.32 1435.46,-3563.04 -163.48,-1124.34 -1046.38,-1609.51 -2209.39,-2393.7l37.82 -680.53c-176.06,512.73 -170.27,724.68 -640.63,991.89 -663.24,376.81 -423.04,437.25 -716.42,558.27 -648.11,-849.25 -1016.67,-1746.59 -664.01,-3118.92l-400.2 494.13c-1592.77,-813.59 -759.87,-518.13 -2670.64,-978.61z"/>
   <polygon class="fil0" points="226996.67,24521.45 232217.93,24521.45 232217.93,30217.31 226996.67,30217.31 "/>
   <polygon class="fil5" points="232008.45,19767.86 237229.86,19767.86 237229.86,25463.64 232008.45,25463.64 "/>
   <polygon class="fil6" points="232131.1,29832.08 234908.17,29832.08 234908.17,32861.47 232131.1,32861.47 "/>
   <polygon class="fil0" points="236912.94,16275.44 240473.97,16275.44 240473.97,20160.34 236912.94,20160.34 "/>
   <polygon class="fil7" points="240213.17,19300.43 242088.19,19300.43 242088.19,21345.65 240213.17,21345.65 "/>
   <path class="fil0" d="M53473.26 18218.47l0 31067.49 7765.31 0 0 -28835.02 -11.58 -1739.72c-1083.35,311.67 -2243.35,580.81 -3714.39,-169.73 -1471.12,-750.54 -3262.33,-631.36 -4039.34,-323.01z"/>
   <path class="fil8" d="M56492.15 19060.77c322.17,0 583.43,252.47 583.43,565.06 0,312.75 -261.27,565.22 -583.43,565.22 -322.17,0 -583.43,-252.47 -583.43,-565.22 0,-312.59 261.27,-565.06 583.43,-565.06z"/>
   <path class="fil8" d="M56492.15 19060.77c322.17,0 583.43,252.47 583.43,565.06 0,312.75 -261.27,565.22 -583.43,565.22 -322.17,0 -583.43,-252.47 -583.43,-565.22 0,-312.59 261.27,-565.06 583.43,-565.06z"/>
   <path class="fil8" d="M59016.13 20552.27c644.25,0 1166.86,506.48 1166.86,1131.05 0,625.34 -522.61,1131.82 -1166.86,1131.82 -644.1,0 -1166.09,-506.48 -1166.09,-1131.82 0,-624.57 521.99,-1131.05 1166.09,-1131.05z"/>
   <path class="fil8" d="M59016.13 20552.27c644.25,0 1166.86,506.48 1166.86,1131.05 0,625.34 -522.61,1131.82 -1166.86,1131.82 -644.1,0 -1166.09,-506.48 -1166.09,-1131.82 0,-624.57 521.99,-1131.05 1166.09,-1131.05z"/>
   <path class="fil8" d="M56827.66 21344.72c164.25,0 296.54,128.82 296.54,287.51 0,159.38 -132.29,288.44 -296.54,288.44 -164.02,0 -297,-129.05 -297,-288.44 0,-158.69 132.99,-287.51 297,-287.51z"/>
   <path class="fil0" d="M15054.32 61002.69l-2501.99 -8360.78 1621.79 0 1482.55 5841.27 23.23 0 1471.12 -5841.27 1158.14 0 1436.55 5841.27 23.16 0 1494.2 -5841.27 1621.63 0 -2490.41 8360.78 -1262.42 0 -1390.23 -5524.89 -23.08 0 -1413.24 5524.89 -1251 0zm9700.77 -4157.81c0,-1227.76 440.26,-2263.42 1320.62,-3107.03 880.28,-843.62 1934.23,-1265.51 3162.22,-1265.51 1227.76,0 2281.94,421.89 3162.22,1265.51 880.51,843.62 1320.38,1879.27 1320.38,3107.03 0,1197.58 -438.02,2218.26 -1314.59,3061.8 -876.42,843.62 -1932.45,1265.35 -3168.01,1265.35 -1235.64,0 -2291.66,-421.73 -3168.01,-1265.35 -876.58,-843.54 -1314.83,-1864.22 -1314.83,-3061.8zm1586.98 -11.35c0,783.42 279.87,1461.24 839.76,2033.64 559.81,572.63 1245.28,858.75 2056.1,858.75 810.97,0 1496.21,-286.12 2056.1,-858.75 559.89,-572.4 839.68,-1250.22 839.68,-2033.64 0,-805.95 -281.72,-1493.2 -845.47,-2061.89 -563.9,-568.69 -1247.29,-852.96 -2050.31,-852.96 -803.02,0 -1486.56,284.27 -2050.39,852.96 -563.6,568.69 -845.47,1255.94 -845.47,2061.89zm9979.02 4169.16l0 -8360.78 2629.34 0c911.23,0 1606.2,188.25 2084.89,564.83 671.96,527.4 1007.71,1201.44 1007.71,2022.45 0,821 -274.08,1487.56 -822.39,1999.91 -331.97,316.38 -806.88,546.08 -1424.66,689.1l2328.25 3084.5 -1934.46 0 -2281.86 -3197.42 0 0 0 3197.42 -1586.82 0zm1586.82 -6914.67l0 2553.47 1019.29 0c579.19,0 996.21,-158.15 1251.07,-474.53 185.16,-225.99 277.94,-497.22 277.94,-813.36 0,-308.97 -100.42,-576.41 -301.09,-802.4 -270.3,-308.66 -679.6,-463.18 -1227.92,-463.18l-1019.29 0zm6700.79 6914.67l0 -8360.78 1586.82 0 0 6914.59 2617.84 0 0 1446.19 -4204.67 0zm6469.08 0l0 -8360.78 1946.04 0c1575.4,0 2749.21,323.86 3521.28,971.59 417.1,346.48 753.01,806.03 1007.71,1378.5 270.37,595.01 405.45,1212.63 405.45,1852.87 0,753.24 -187.25,1461.24 -561.74,2124.1 -374.5,662.85 -870.63,1160 -1488.41,1491.35 -671.89,361.53 -1621.86,542.37 -2849.47,542.37l-1980.85 0zm1586.98 -6914.67l0 5468.47 335.75 0c880.51,0 1575.48,-135.53 2085.04,-406.76 409.31,-218.51 729.93,-546.08 961.48,-982.94 216.35,-414.25 324.25,-854.97 324.25,-1321.93 0,-836.13 -305.03,-1521.52 -915.01,-2056.25 -532.65,-467.12 -1362.99,-700.6 -2490.41,-700.6l-301.09 0zm10893.8 2756.85c0,-1227.76 440.26,-2263.42 1320.54,-3107.03 880.36,-843.62 1934.3,-1265.51 3162.3,-1265.51 1227.76,0 2281.86,421.89 3162.22,1265.51 880.51,843.62 1320.38,1879.27 1320.38,3107.03 0,1197.58 -438.02,2218.26 -1314.59,3061.8 -876.42,843.62 -1932.45,1265.35 -3168.01,1265.35 -1235.64,0 -2291.66,-421.73 -3167.86,-1265.35 -876.58,-843.54 -1314.98,-1864.22 -1314.98,-3061.8zm1586.98 -11.35c0,783.42 279.87,1461.24 839.91,2033.64 559.81,572.63 1245.13,858.75 2055.95,858.75 810.97,0 1496.21,-286.12 2056.1,-858.75 559.81,-572.4 839.84,-1250.22 839.84,-2033.64 0,-805.95 -281.88,-1493.2 -845.63,-2061.89 -563.75,-568.69 -1247.14,-852.96 -2050.31,-852.96 -803.02,0 -1486.56,284.27 -2050.39,852.96 -563.6,568.69 -845.47,1255.94 -845.47,2061.89zm9944.13 4169.16l0 -8360.78 4366.91 0 0 1446.12 -2779.93 0 0 2045.14 2652.5 0 0 1446.12 -2652.5 0 0 3423.41 -1586.98 0zm16558.32 -2327.48l1841.68 0c-331.97,753.24 -866.7,1357.74 -1604.11,1813.28 -737.57,455.69 -1523.15,683.54 -2357.19,683.54 -1227.99,0 -2280.09,-433.08 -3156.51,-1299.16 -876.35,-866.16 -1314.75,-1894.32 -1314.75,-3084.57 0,-1167.48 432.38,-2178.59 1297.31,-3033.63 864.84,-854.81 1911.3,-1282.33 3139.14,-1282.33 795.3,0 1544.29,195.97 2247.05,587.6 810.97,459.4 1409.45,1114.77 1795.45,1965.87l-1806.8 0c-656.6,-738.11 -1421.03,-1107.12 -2293.67,-1107.12 -718.2,0 -1355.27,271.15 -1911.23,813.36 -586.83,572.4 -880.28,1265.51 -880.28,2078.87 0,783.49 283.73,1465.18 851.26,2045.06 567.69,579.88 1233.71,869.94 1998.21,869.94 756.79,0 1474.83,-350.18 2154.43,-1050.7zm4268.42 2327.48l0 -8360.78 2629.34 0c911.31,0 1606.2,188.25 2085.04,564.83 671.81,527.4 1007.71,1201.44 1007.71,2022.45 0,821 -274.23,1487.56 -822.55,1999.91 -331.97,316.38 -806.73,546.08 -1424.66,689.1l2328.25 3084.5 -1934.46 0 -2281.86 -3197.42 0 0 0 3197.42 -1586.82 0zm1586.82 -6914.67l0 2553.47 1019.29 0c579.19,0 996.37,-158.15 1251.07,-474.53 185.16,-225.99 277.94,-497.22 277.94,-813.36 0,-308.97 -100.42,-576.41 -301.09,-802.4 -270.3,-308.66 -679.6,-463.18 -1227.92,-463.18l-1019.29 0zm6573.36 6914.67l0 -8360.78 4610.11 0 0 1446.12 -3023.29 0 0 2045.14 2896.01 0 0 1446.12 -2896.01 0 0 1977.22 3023.29 0 0 1446.19 -4610.11 0zm6874.38 0l3567.82 -8360.78 1239.34 0 3590.75 8360.78 -1748.91 0 -915.32 -2158.06 -3069.45 0 -915.17 2158.06 -1749.06 0zm4170.16 -6180.26l-973.13 2564.82 1969.11 0 -972.9 -2564.82 -23.08 0zm7453.56 6180.26l0 -6914.67 -1586.82 0 0 -1446.12 4772.28 0 0 1446.12 -1598.48 0 0 6914.67 -1586.98 0zm5519.41 0l0 -8360.78 1586.67 0 0 8360.78 -1586.67 0zm7314.71 0l-3336.04 -8360.78 1667.87 0 2293.44 6360.87 23.31 0 2305.17 -6360.87 1667.87 0 -3324.31 8360.78 -1297.31 0zm6990.23 0l0 -8360.78 1586.82 0 0 8360.78 -1586.82 0zm5542.57 0l0 -6914.67 -1586.98 0 0 -1446.12 4772.28 0 0 1446.12 -1598.32 0 0 6914.67 -1586.98 0zm7476.64 0l0 -3084.5 -2814.59 -5276.29 1737.33 0 1865.15 3841.44 1876.34 -3841.44 1749.22 0 -2826.47 5276.29 0 3084.5 -1586.98 0z"/>
  </g>
 </g>
</svg>
   <![CDATA[
    .fil0 {fill:#FEFEFE}
    .fil1 {fill:#010101}
    .fil3 {fill:#020202}
    .fil8 {fill:#030303}
    .fil5 {fill:#2FA94E}
    .fil4 {fill:#3784F1}
    .fil7 {fill:#E94432}
    .fil6 {fill:#FCBA04}
    .fil2 {fill:#FDFDFD}
   ]]>
  </style>
 </defs>
 <g id="Layer_x0020_1">
  <metadata id="CorelCorpID_0Corel-Layer"/>
  <rect class="fil0" x="1.53" y="1.07" width="1917.59" height="1919.22"/>
  <g id="_2592210700656">
   <path class="fil1" d="M986.55 1766.33l51.1 -0.02 -0.13 103.07 -50.37 0.15 -0.61 -103.2zm673.37 0.62l51.07 -1.13 0.66 51.36 -50.98 0.36 -0.74 -50.59zm-310.36 -0.6l51.06 -0.05 -0.07 51.04 -50.96 0.09 -0.04 -51.08zm414.24 -52.09l52.13 -0.74 0.43 -50.78 50.67 0.14 -0.15 102.72 -102.28 0.21 -0.8 -51.55zm-725.35 -51.65l50.29 -0.64 1.04 50.95 -51.43 0.53 0.11 -50.83zm725.24 -52.03l51.84 -0.04 -0.01 51.54 -50.34 -0.18 -1.49 -51.32zm-259.18 -103.3l155.2 -0.6 0.04 154.97 -154.1 0.26 -1.14 -154.63zm207.31 -52.33l51.26 -0.57 0.45 155.31 -51.48 -0.04 -0.24 -154.71zm-310.9 52.37l51.69 -0.59 0.06 102.81 -51.69 0.42 -0.06 -102.64zm-155.45 153.73l50.78 0.97c5.77,66 -15.93,47.73 52.54,52.63l0.13 51.02 -51.63 0.65 -0.11 50.14 51.83 1.59 -0.27 50.65 -206.91 0.87 0.07 -155.94 51.17 -0.14 -0.07 -51.4 -50.55 -0.32 -0.93 -50.67 51.28 -1.21 1.25 -51.73 51.86 -0.68 0.3 -50.85 102.61 0.26 0.41 103 51.28 0.4 0 103.34 -50.58 -0.07 -0.41 -49.19 -51.39 -2.79 -1.18 -50.84 -50.15 -0.69 -1.33 50.99zm-103.76 -153.27l51.67 -1.19 0.03 50.8 -18.12 0.26 -13.35 -0.05 -20.36 -0.74 0.12 -49.07zm0.71 -208.48l153.35 -0.68 1.65 50.94 51.33 1.49 0.9 51.75 50.87 0.33 0.03 50.88 -153.23 0.06 -2.17 51.68 -50.81 0.44 -0.7 -102.28c-13.81,-2.69 -22.54,-0.63 -35.52,-1 -20.86,-0.61 -17.13,-1.2 -16.7,-23.94 0.48,-25.65 -1.19,-54.65 1.02,-79.67zm413.81 154.2l-51.69 0.41 -0.2 -50.34 -50.34 -1.29 -0.97 -51.65 50.36 -0.13 1.47 -51.83 101.49 -0.05 1.35 51.65 -50.1 0.25 -1.38 102.97zm-517.76 -258.34l50.42 -0.2 0.73 103.41 -50.49 0.15 -0.66 -103.36zm414.11 154.96l-102.67 0.23 0.07 -51.7 50.35 -0.43 0.7 -50.59 102.98 -0.61 0.12 50.66c-63.27,1.06 -50.64,-11.63 -51.54,52.45zm311.48 -154.97l102.04 -0.23 0.95 51.44 -102.89 0.34 -0.09 -51.56zm-0.22 -259.84l50.85 0.22 0.84 102.85 -50.79 0.81 -0.9 -103.89zm-103.83 -52.21l49.5 -0.23 2.7 -51.84 51 -0.54 0.26 104.82 -102.1 0 -1.35 -52.21zm-51.69 -0.95l0.12 104.96 103.26 0.41 0.07 50.73 -49.9 0.96 -1.83 51.31 49.91 0.29c3.62,13.77 3.6,141.43 0.18,155.85l-152.56 0.29 -0.9 -52.34 50.8 -0.41 0.15 -50.89 -49.99 -0.18 -1.01 -52.06 50.93 -0.43 0.13 -51.09 -49.81 0.07 -1.83 -103.97 -50.56 -0.49 -0.68 -52.51 103.53 -0.51zm207.11 -50.66l51.32 -1.12 0.2 51.84 -50.84 -0.23 -0.68 -50.48zm-414.46 -53.19l51.38 0.23 0.37 51.27 -51.57 0.26 -0.19 -51.76zm207.35 103.85l-0.72 -51.51 -102.87 -0.61 -0.05 -51.46 51.87 -0.67 0.3 -103.19 50.94 0.35 0.55 102.94 50.35 0.48 1.32 -102.02 51.48 -1.73 1.09 51.7 102.89 0.62 0.06 102.4 -51.67 0.76 -0.17 -50.06c-14.17,-3.08 -39.5,-3.9 -52.4,1.02l-0.25 48.97 -50.03 0.29 -1.37 51.81 -51.31 -0.11zm-155.15 -155.09l50.75 -0.18 0.28 50.68 -51.15 0.24 0.11 -50.74zm-414.77 -103.9l102.26 -0.37 0.84 51.16 -102.05 0.78 -1.05 -51.57zm258.93 -51.83l51.6 -0.22 -0.15 50.78 -50.81 0.92 -0.63 -51.48zm0.5 -259.94c15.8,-0.01 37.37,-1.95 49.2,2.36 4.28,14.46 -0.11,27.71 2.74,40.88 0.17,0.79 0.68,1.94 0.85,2.55l49.86 6.44 0.07 50.87 -103.24 -0.48 0.51 -102.62zm103.55 0l51.24 0.22 -0.06 51.58 -51.68 -0.48 0.5 -51.32zm-0.1 -103.64l51.41 0.31 -0.65 51.27 -50.98 -0.44 0.22 -51.13zm-362.81 987.41l-103.52 -0.49 -0.66 -25.05c-48.26,-10.15 -65.27,-18.54 -99,-41.09l-4.83 9.04c-5.85,13.14 0.95,0.14 -1.83,5.7l-49.13 0.17 0.5 103.02 50.61 1.06 0.27 50.32 51.33 -1.06 1.61 -50.16 102.68 1.35 -0.18 50.04 -51.46 1.19 -0.3 50.97 155.46 1.01 0.05 152.7c-13.38,4.15 -39.55,4.61 -52.48,-0.5l-0.07 -100.35 -103.05 0.83 0.09 49.46c67.56,4.57 51.55,-21.41 52.06,104.11l51.17 0.5 -1.28 52.15 -49.84 0.28 -0.33 50.93 -51.65 1.23 0.16 50.78 50.73 0.31 0.33 51.96 -51.69 2.12 -0.36 101.92 -50.84 0.06 -0.26 -48.78c-14.5,-6.23 -35.2,-3.17 -51.45,-2.89 -0.52,16.32 -3.39,36.8 2.45,51.76l48.69 0.69 1.07 50.85 50.54 -0.89 0.33 -50.41 51.67 0.32 1.04 50.9 50.63 -0.67 0.41 -50.53 102.87 0 0.55 49.26c13.39,4.42 236.73,4.42 258.79,0.96l2.24 -50.7 101.42 -0.2 -0.32 -51.46 -50.63 -0.87 -1.65 -50.9 -48.34 -1.87c-3.9,-12.35 -2.42,-33.89 -2.07,-50.29l103.06 0.12 0.31 48.98c18.92,7.11 77.97,1.35 103.74,3.34l-1.03 51.17 -50 0.35 -1.11 51.83 -51.34 0.9 0.07 50.23 206.26 0.12 0.45 -50.87 52.02 -0.74 0.18 -49.38c19.21,-5.89 79.2,-2.51 103.51,-2.18l-1.93 52.07 -101.29 0.18 -0.02 50.89 155.22 -0.69 -0.78 -361.85 -49.48 -0.3c-3.03,-17.12 -1.56,-35.33 -1.56,-52.79l-0.17 -39.72c-1.13,-7.67 -0.17,-5.24 -3.31,-9.19 -10.86,-6.26 -80.86,-2.34 -100.07,-2.26l-0.59 -50.16c-13.58,-2.88 -39,-3.6 -51.81,0.83l-0.22 49.37 -103.09 -0.9 0.13 -102.42 51.58 -1.46 1.7 -50.9 153.99 0.76 0.77 102.93 102.96 -0.57 -2.23 -51.1 -49.74 -0.67 1.37 -51.14 50.52 -0.69 -1.47 -154.89 -50.17 -0.63 0.53 -51.39 51 -0.39 -0.68 -155.23 -50.68 -0.36 -0.25 -52.22 48.74 -0.39c5.94,-13.42 4.63,-37.39 1.19,-52.22l-50.14 -0.39 1.09 -51.18 51.27 -2.5 -0.39 -49.47 -102.89 -0.24 -0.33 -101.87c-41.55,-11.63 -167.74,7.87 -207.53,-3.98l-0.26 -49.51 51.84 -1.57 0.54 -102.6 51.28 1.39 0.95 50.24 50.43 0.1 0.33 -49.04c15.36,-5.12 33.73,-2.25 51.52,-2.93l-0.4 -51.47 -258.16 1.51 1.17 50.11 50.11 0.06 -0.2 103.68 -102.91 -0.44 -1.5 -102.95 -50.14 -0.22 0.03 -103.54 51.37 -0.72 -0.56 -206.62 -51.02 -1.69 0.03 -50.06 51.36 -1.26 -0.17 -51.14 -154.99 1.12 1.41 50.56 50.33 0.15 -1.32 51.73c-22.96,0.23 -83.71,3.32 -102.27,-2.04l-0.53 -49.61 -102.89 0.29 0.85 51.17 50.56 0.8 0.39 50.74 102.82 0.37 0.11 51.69 -51.15 1.91 -0.15 50.04 -49.52 0.26c-4.14,13.02 -3.98,139.84 -0.61,155.85l205.83 0.26 -0.92 51.36 -51.17 2.22 -0.34 49.76 -50.91 -0.16 -0.36 -49.22c-13.02,-4.24 -38.06,-3.76 -51.89,-0.54l-0.2 49.77 -50.89 0.53 -1.18 51.54 -50.78 0.07c-4.18,-69.24 12.78,-46.19 -52.51,-53.03l-1.08 -50.37 -50.24 -0.22 -1.77 -51.53 -50.28 0.78 -1.33 102.52 -50.28 0.41 -0.46 102.99 -51.73 0.83 0.02 78.02 51.44 0.18 1.16 -26.68 50.57 0.57 0.87 38.22c15.26,13.15 27.38,13.17 50.92,11.88l1.09 -50.65 50.81 0.19 -0.48 51.53 -49.99 0.31c-3.04,35.92 17.07,15.03 63.64,103.63l38.29 -0.36 1.42 -51.4 51.14 -1.2 -0.82 -50.29 -51.32 -2 0.79 -50.17 51.09 -1.67 0.54 -50.4 154.14 -0.1 1.07 -50.33c16.63,-3.94 36.29,1.94 51.86,-4.45l0.8 -48.94 50.02 0.2c3.88,65.5 -12.63,48.23 52.78,52.7l-0.15 50.33 -102.85 0.54 -0.71 51.53 -51.69 1.71 -1.49 50.49 -49.98 0.94 -2.28 44.85c-0.19,0.68 -0.98,3.03 -1.14,2.57 -0.15,-0.46 -0.72,1.73 -1.26,3.52l-99.47 1.01 0.78 50.74 206.39 0.45 -0.69 52.73 -50.44 0.45 -1.6 51.22 -50.52 1.87c-0.61,16.39 2.56,35.67 -2.91,50.91l-100.31 -0.03 0.25 51.05c64.81,0.02 49.2,-10.52 51.43,52.18l50.65 -0.83 2.5 -51.3 49.56 -0.2 0.31 -51.03 51.56 -0.69 1.71 -51.77 49.23 0.37c1.69,9.22 1.67,18.53 1.66,28.05 -0.01,11.84 0.3,16.66 -4.52,23.88l-47.33 0.5c0,125.42 14.78,99.98 -51.97,104.1l-0.85 50.49 -51.09 1.57 -0.44 50.67 -103.3 -1.33 -0.13 -50.16 -51.8 -1.59 -0.26 -50.29 -100.12 0.18 -6.54 -12.49c-0.2,-1.21 -0.87,-1.51 -1.43,-2.17 -11.66,10.74 -28.62,19.39 -46.74,26.87l0.06 39.43z"/>
   <path class="fil1" d="M313.49 1091.1l50.29 0.03 -0.53 51.85 -50.1 -0.26 0.34 -51.62zm155.79 -51.9l50.01 0 0.32 51.46 -51.89 -0.58 1.56 -50.88zm-1.07 -157.06l-1.5 105.05 -50.22 -0.53 -1.47 -51.18 -102.39 -1.16 0.67 -52 154.92 -0.19zm-310.77 -51.72l51.37 0.74 -0.67 50.87 -50.84 0.06 0.14 -51.66zm51.18 -51.94l51.54 0.08 0 51.68 -51.39 -0.89 -0.15 -50.87zm-102.8 0.22l50.83 -0.19 -0.02 51.71 -51.6 -0.86 0.78 -50.67zm102.8 -0.22l-51.27 -0.02 -0.06 -51.71 51.43 1.3 -0.09 50.43zm52.42 -51.54l51.46 0.69 0.02 49.93 -51.82 -0.16 0.35 -50.46zm51.79 -51.88l50.84 -0.27 -0.33 51.73 -51 -0.59 0.49 -50.87zm414.52 -207.94l51.65 1.1 -0.78 50.6 -50.7 -0.1 -0.18 -51.61zm-258.95 -155.67l51.22 0.13 -0.39 51.57 -51.28 -0.78 0.45 -50.93zm-363.24 623.89l155.22 1.38 2.55 50.43 101.07 0.26 -1.08 51.59 -50.11 1.2 -0.31 50.41 -48.85 0.19c-5.23,13.81 -5.46,38.66 0.08,52.31l48.85 0.59 0.04 50.44 -51.12 1.19 -1.89 51.48 -49.93 0.21 -0.14 50.78 50.7 0.43 0.89 52.05 51.17 -0.59 0.82 -50.59 51.02 -1.96 -1.01 -49.92 -50.59 -1.99 -0.25 -50.21 104 -2.09 0.2 -49.74 51.12 -0 0.33 51.07 51.18 0.35 1.41 -51.27 51.1 -1.57 -0.82 -259.32 -102.59 -0.31 -0.56 -51.65 49.68 -0.16c4.72,-15.32 3.14,-35.24 1.33,-51.37 -16.01,-0.76 -36.24,-3.13 -50.94,2.09l-0.17 49.33 -155.04 -1.62 -0.34 -50.17 104.1 -2.18 1.12 -101.61 50.25 -1.13 0.74 -102.35 51.42 -1.67 0.32 -49.96 50.77 -0.5 0.75 -52.1 103.66 1.13 0 102.13 101.59 0.43c3.93,13.58 4.21,39.09 -0.31,52.45l-100.52 -0.05 0.01 51.01 154.48 -0.07c-0.08,-22.93 0.12,-45.89 -0.07,-68.81 -0.45,-54.96 -16.33,-27.55 155.72,-35.23l-0.32 -102.68 -51.21 0.48 -0.58 50.94 -103.27 -0.17 2.28 -51.58 49.44 -1.03 -1.07 -50.56 -102.52 -1.05 1.03 -154.93 50.28 -0.38 -0.24 -51.48 -154.32 0.42 -2.55 51.81 -49.54 0.09 0.45 103.28 50.94 -1.31 0.64 -50.43 51.29 -0.01 -0.17 155.59 -51.55 -0.78 -0.71 -50.57 -51.07 -1.91 -0.26 -50.09 -51.09 -0.42 -1.61 -103.58 -50.25 -0.59 0.07 -51.46 51.21 -0.82 -1.54 -103.15 -49.96 0.87 -0.25 102.76 -51.77 -0.9 -1.5 -102.76 -50.3 0.7 0.65 310.55 154.74 1.12 0.22 50.68 -51.58 1.1 -0.93 51.15c-16.47,0.07 -36.43,2.85 -51.68,-2.41l-0.49 -49.37 -102.79 0.46 0.48 50.93 51.3 2.36c0.92,16.95 0.4,34.07 0.41,51.06 0.01,54.48 23.54,55.71 -103.43,50.98l-0.88 -51.88 -51.24 0.17 -1.03 103.23 -51.04 -0.52 -0.35 -103.05 -51.61 2.31 -0.25 153.12 -103.24 1.21 -0.2 102.54 -51.25 0.35 0.22 51.81 51.1 -2.2 0.31 -49.81 51.59 0.88 -0.07 104.17z"/>
   <path class="fil2" d="M995.5 1025.17c-11.17,11.48 -15.09,29.85 -30.83,39.43 -21.16,12.87 -44.2,3.87 -58.22,-7.14 -11.92,-3.59 -43.4,-22.58 -52.61,-30.63 -41.64,-36.35 -10.89,-78.26 12.09,-117.63 23.6,-40.43 28.25,-17.81 56.13,-16.98 6.49,-22.96 32.44,-44.83 65.74,-39.57 14.69,2.32 58.69,27.6 67.15,35.64 44.32,22.41 39.96,49.79 16.39,89.8 -9.02,15.32 -18.15,33.8 -26.08,43.93 -16.07,20.52 -30.96,10.19 -49.77,3.16zm159.83 -39.81c8.32,-48.09 -9.33,-120.66 -47.53,-155.5l-18.81 -18.16c-8.86,-8.32 -17.29,-13.98 -28.61,-20.22 -0.68,-0.37 -1.56,-0.8 -2.23,-1.19l-14.45 -8.81c-44.03,-20.21 -103.11,-22.36 -144.23,-7.12 -7.93,2.94 -0.42,0.19 -9.43,3.79l-24.41 11.45c-2.52,1.76 -4.02,3.16 -7.57,5.68l-21.89 14.75c-29.95,23.78 -61.33,72.43 -67.06,106.6 -6.65,39.63 -7.26,69.72 4.51,105.45 11.28,34.23 34.42,68.26 61.72,89.54 64.6,50.37 130.08,61.89 208.28,30.44 22.64,-9.1 50.35,-34.97 67.54,-54.08 8.3,-9.22 14.7,-18.44 20.76,-28.5 3.26,-5.41 6.25,-11.56 8.73,-17.41 16,-37.74 10.41,-31.9 14.7,-56.71z"/>
   <path class="fil1" d="M520.06 1817.67l50.57 0.05 0.31 51.81 -50.2 0.06 -0.68 -51.91zm-52.13 -51.13l51.81 0.17 -0 50.67 -51.78 -0.59 -0.02 -50.25zm156.8 -104.68l50.33 0.81 0.44 50.51 51.3 0.15 -0.17 -102.95 -50.83 -0.25 -1.31 -51.56 -50.45 -0.27 -0.44 49.35c-15.8,4.84 -35.21,2.7 -51.87,2.01l-0.7 -51.29 -50.86 1.42c-2.91,62.67 -7.34,49.78 50.98,50.47l0.01 50.91 -103.16 -0.68 -1.36 -50.36 -49.84 0.63 0.26 206.68 50.52 0.22 -0.56 51.87 -50.69 0.95 0.6 50.57 188.38 0.37c23.65,0.01 18.12,-1.39 18.18,-26.08l0.62 -77.73 50.82 0.68 2.59 51.47 49.36 0.41 0.71 50.85 51.16 -0.06 -1.28 -51.17 -50.04 -0.29 -1.56 -51.82 -49.95 -0.19 -0.13 -50.85 -52.23 -0.79 1.17 -104.02z"/>
   <path class="fil1" d="M53.72 1610.18l258.78 0.93 -0.44 258.43 -258.43 -0.19 0.08 -259.17zm-49.61 -52.32c-4.92,13.42 -5.47,335.2 -1.41,363.6l361.51 -1.22 -1.67 -362.53 -358.44 0.15z"/>
   <path class="fil1" d="M53.2 53.48l258.37 -1.61 0.87 259.09 -258.6 0.29 -0.64 -257.77zm-51.29 309.57l361.9 -0.09 -0 -362.77 -362.27 0.87 0.37 361.98z"/>
   <path class="fil1" d="M1608.89 51.86l258.54 1.48 -0.63 257.92 -258.62 -0.19 0.71 -259.2zm-51.46 311.24l361.67 -0.85 -0.02 -362.01 -362.33 0 0.68 362.86z"/>
   <path class="fil1" d="M623.49 1297.85c48.07,-0.09 99.23,-11.19 103.56,11.17l0.24 39.66c-0.02,17.77 -0.81,35.77 1,53.56l50.56 0.67 -1.26 51.48 -205.77 0.78 0.41 50.8 154.92 1.24 0.46 102.7 102.91 -0.25 -1.13 -51.25 -50.37 -0.78 1.05 -51.42 153.8 -0.19 -0.34 -51.41 -102.91 -1.63 0.41 -50.24 102.77 -0.49 -0.25 -51.49c-124.22,-0.15 -103.04,11.87 -103.04,-51.09l-50.8 -0.39 -0.87 -51.57 -93.16 -0.86c-22.57,-3.68 -10.33,-55.94 -11.43,-103.54l-50.59 0.03 -0.15 154.52z"/>
   <path class="fil1" d="M778.88 1142.36l-0.43 -50.71 -51.59 -1.83 0.51 -207.03 41.17 -0.91c7.7,-16.42 22.06,-36.04 27.43,-51.19l-68.97 -1.03 -0.49 -102.6 -103.05 -0.76 -0.32 -103.02 -103.09 0.1 0.11 50.61 51.18 0.5 1.43 103.76 102.31 0.93 -0.04 50.6 -51.52 1.32 0.33 103.59 51.38 1.46 -1.56 51.1 -50.1 0.21 1.19 51.13 51.21 2.71 0.83 101.63 102.08 -0.56z"/>
   <path class="fil1" d="M470.6 1402.99c-5.01,-13.35 -4.39,-38.66 -0.63,-52.7l49.73 -0.22 -1.08 -51.32 -101.61 0.06 -1.02 51.72 -102.95 0.36 1.05 51.35 50.07 1.46 0.25 49.75c66.85,3.46 52.08,-20.3 52.1,104.08l50.91 0.02c1.32,-120.74 -17.37,-101.56 52.26,-103.87l-0.04 -50.44 -49.04 -0.25z"/>
   <path class="fil1" d="M260.15 1816.79l0.52 -151.34c-20.14,-3.9 -1.5,-3.85 -35.34,-3.54l-119.37 0.85c-0.71,7.3 -4.95,146.29 2.18,152.81 4.63,4.24 135.56,3.35 152.01,1.22z"/>
   <polygon class="fil1" points="1661.09,259.4 1815.47,258.32 1815.23,104.06 1660.23,104.12 "/>
   <polygon class="fil1" points="105.09,258.44 260.59,259.2 260.63,104.38 107.01,103.54 "/>
   <path class="fil3" d="M105.17 935.35l-103.66 0.5 1.86 51.2 49.64 0.71c1.72,61.93 -10.24,51.82 51.5,51.81l-0.15 51.16 -50.61 0.81 -0.89 51.16 -51.7 2.04 0.08 49.67 52.12 -1.11 0.2 -50.07 50.89 0 0.3 51.1 52.16 -1.02 -0.46 -49.86 -51.35 -0.9 0.13 -51.08c5.65,-0.28 46.06,0.73 47.48,-2.69 0.38,-0.91 1.53,-0.54 3.72,-0.94l1.72 -48.7 50.63 -0.96 -1.96 -50.69c-64.56,-3.62 -47.56,-1.86 -50.48,51.67l-51.26 -0.27 0.09 -103.56z"/>
   <path class="fil1" d="M155.77 518.88c5.6,-51.47 -12.41,-52.72 25.96,-52.11 23.99,0.38 55.11,-1.73 78.7,1l1.12 51.03 50.53 -0.07c1.57,-36.7 -3.05,-18.37 3.78,-51.48l48.1 -0.46 -1.38 -51.42c-72.71,-0.35 -189.02,-2.55 -256.73,0.7l0.07 102.33 49.85 0.48z"/>
   <path class="fil1" d="M1141.83 155.31l1.82 -51.67 49.8 -0.39 -1.33 -51.11 -50.07 -0.67 -1.6 -51.48 -98.48 1.16c-7.85,12.55 -3.89,143.16 -2.88,154.3l102.74 -0.15z"/>
   <polygon class="fil1" points="884.46,51.19 934.02,51.07 933.91,0.17 831.06,0.82 830.5,51.41 779.47,53.06 777.27,103.9 727.19,104.25 728.45,155.52 882.16,155.37 "/>
   <polygon class="fil1" points="935.25,259.14 1038.04,260.17 1038.42,363 1089.31,362.74 1091.32,311.02 1141.09,310.85 1140.48,207.69 934.45,208.09 "/>
   <polygon class="fil1" points="1.97,1505.96 53.13,1505.83 52.81,1247.11 1.53,1247.84 "/>
   <path class="fil4" d="M906.44 1057.45c-5.41,-16.44 -12.68,-26.05 -3.03,-46.2 4.53,-13.25 19.39,-37.74 25.64,-49.02 13.31,-24.02 19.88,-11.92 14.77,-52.52 -11.57,-8.48 -13.52,-3.35 -21.77,-17.51 -27.89,-0.82 -32.54,-23.44 -56.13,16.98 -22.98,39.37 -53.73,81.28 -12.09,117.63 9.21,8.04 40.69,27.03 52.61,30.63z"/>
   <path class="fil5" d="M922.06 892.21c8.25,14.16 10.2,9.02 21.77,17.51 5.11,40.6 -1.46,28.5 -14.77,52.52 -6.25,11.28 -21.11,35.76 -25.64,49.02 50.15,7.59 38.11,10.33 59.68,-17.91 10.71,-14.02 37.71,-75.04 48.1,-80.73 5.02,-16.76 22.67,-24.41 43.76,-24.34 -8.47,-8.04 -52.47,-33.32 -67.15,-35.64 -33.3,-5.26 -59.25,16.61 -65.74,39.57z"/>
   <polygon class="fil1" points="1090.06,414.38 1140.96,414.72 1141.88,466.64 1193.31,466.49 1193.32,312.6 1142.57,312.45 1142.31,363.15 1090.22,363.81 "/>
   <polygon class="fil1" points="1816.94,570.72 1867.02,571.14 1867.56,674.24 1919,674.26 1917.98,519.06 1815.77,519.92 "/>
   <path class="fil6" d="M903.41 1011.25c-9.65,20.15 -2.38,29.76 3.03,46.2 14.02,11.02 37.06,20.01 58.22,7.14 15.74,-9.57 19.67,-27.94 30.83,-39.43 3.39,-15.77 22,-42.42 31.25,-58.37 17.18,-29.63 7.52,-36.5 -15.56,-54.19 -10.39,5.69 -37.39,66.71 -48.1,80.73 -21.57,28.24 -9.53,25.49 -59.68,17.91z"/>
   <polygon class="fil1" points="208.62,1402.12 157.52,1402.37 156.41,1453.91 105.3,1455.48 105.65,1506.06 208.62,1504.97 "/>
   <polygon class="fil1" points="934.47,414.35 1037.58,414.37 1037.43,363.7 986.64,362.95 985.53,311.48 934.57,311.85 "/>
   <polygon class="fil1" points="728.14,1765.73 882.22,1764.96 882.15,1714.13 727.28,1714.13 "/>
   <path class="fil1" d="M520.9 1402.41l102.18 -0.38 0.28 -102.44 -50.8 -0.09c0.37,59.39 10.24,51.02 -52.44,51.39l0.78 51.52z"/>
   <path class="fil7" d="M1011.19 912.62c23.07,17.68 32.74,24.56 15.56,54.19 -9.25,15.94 -27.86,42.59 -31.25,58.37 18.81,7.03 33.69,17.36 49.77,-3.16 7.93,-10.13 17.06,-28.61 26.08,-43.93 23.57,-40.01 27.93,-67.39 -16.39,-89.8 -21.09,-0.06 -38.74,7.58 -43.76,24.34z"/>
   <path class="fil1" d="M1193.76 1039.5l51.65 -0.66 -0.3 -51.29 -77.08 0.24c-1.96,18.65 -7.09,35.93 -13.04,50.93 -10.03,25.29 -13.09,17.76 -13.27,51.67l51.48 0.02 0.56 -50.91z"/>
   <polygon class="fil1" points="1608.2,1142.59 1659.43,1142.9 1659.79,1091.51 1608.14,1091.15 "/>
   <polygon class="fil1" points="1141.83,155.31 1141.59,206.91 1193.37,206.81 1192.53,155.67 "/>
   <polygon class="fil1" points="1194.36,1142.83 1245.38,1142.37 1245.3,1091.28 1193.87,1091.26 "/>
   <path class="fil1" d="M831.26 674.99c-0.53,15.82 -1.85,36.81 1.78,49.26 11.93,3.61 33.46,2.85 49.24,1.18l-0.16 -50.61 -50.85 0.17z"/>
   <polygon class="fil1" points="934.83,1609.79 986.09,1609.6 985.77,1558.24 934.7,1558.76 "/>
   <polygon class="fil1" points="208.62,1402.12 260.11,1402.18 259.93,1350.74 208.82,1351.46 "/>
   <polygon class="fil1" points="157.47,1350.3 208.67,1349.35 208.69,1298.68 157.39,1298.93 "/>
   <polygon class="fil1" points="1194.62,259.42 1245.21,258.28 1245.43,207.83 1193.83,207.88 "/>
   <polygon class="fil1" points="1193.97,1765.65 1244.78,1765.5 1245.41,1715.19 1194.11,1713.88 "/>
   <polygon class="fil3" points="468.89,51.79 519.29,51.5 519.6,0.23 467.86,1.04 "/>
   <polygon class="fil1" points="934.82,103.44 986.16,102.78 985.11,52.09 934.58,51.9 "/>
   <polygon class="fil1" points="1.56,466.76 53.24,466.42 52.06,415.33 1.77,415.88 "/>
   <polygon class="fil1" points="105.87,1402.11 156.59,1402.27 156.44,1350.65 105.22,1351.89 "/>
   <polygon class="fil1" points="883.07,674.21 934.11,674.12 933.84,623.26 883.09,623.26 "/>
   <polygon class="fil1" points="831.53,363.04 882.36,362.2 881.85,311.61 831.02,311.72 "/>
   <polygon class="fil1" points="1557.07,1609.9 1607.69,1609.96 1606.56,1558.15 1557.05,1558.23 "/>
   <polygon class="fil1" points="832.19,1661.83 882.11,1661.39 882.39,1610.51 830.76,1610.7 "/>
   <polygon class="fil1" points="883.3,207.14 934.02,207.16 934.04,156.32 882.98,156.23 "/>
   <polygon class="fil1" points="675.47,103.16 726.92,103.2 725.67,51.89 675.49,52.74 "/>
   <polygon class="fil1" points="1246.24,1194.33 1297.04,1194.04 1297.06,1143.34 1246.17,1143.37 "/>
   <polygon class="fil1" points="1.54,673.92 53.14,673.69 53.11,623.2 1.5,624.24 "/>
   <polygon class="fil1" points="623.83,207.27 675.26,206.04 674.26,155.92 624.04,155.7 "/>
   <polygon class="fil1" points="313.76,1506.13 363.6,1506 363.39,1454.43 313.11,1454.46 "/>
   <polygon class="fil1" points="779.54,777.78 830.53,777.81 830.15,727.03 779.72,726.98 "/>
   <polygon class="fil1" points="209.69,570.47 260.34,570.35 260.38,519.75 209.52,519.64 "/>
   <polygon class="fil1" points="313.16,570.54 363.7,570.34 363.9,519.72 313.05,519.62 "/>
   <polygon class="fil1" points="1.59,570.32 53.05,569.93 53.15,519.73 1.52,520.77 "/>
   <polygon class="fil8" points="572.73,51.85 623.43,50.03 622.91,0.26 572.11,0.34 "/>
   <polygon class="fil1" points="106.01,1297.89 156.79,1297.67 156.55,1247.17 106.24,1247.05 "/>
   <polygon class="fil1" points="623.49,621.54 674.67,621.52 673.71,571.06 623.85,571.14 "/>
  </g>
 </g>
</svg>
        <div style="font-size: 10px; margin-top: 5px;">UPI / GPay</div>
      </div>
    `;

    // --- END LOGIC ---

    const htmlContent = `
  <html>
  <head>
    <style>
      body { font-family: 'Arial', sans-serif; margin: 0; padding: 0; color: #333; }
      .container { width: 800px; margin: auto; padding: 20px; border: 1px solid #ddd; }
      .header { display: flex; justify-content: space-between; align-items: center; border-bottom: 2px solid #f36f21; padding-bottom: 10px; margin-bottom: 20px; }
      .logo { font-size: 28px; font-weight: bold; color: #f36f21; }
      .invoice-title { font-size: 24px; font-weight: bold; color: #333; }
      .company-info { font-size: 12px; margin-top: 5px; }
      .bill-info, .invoice-info { margin-bottom: 20px; }
      .section-title { background-color: #f36f21; color: #fff; padding: 8px 10px; font-weight: bold; margin-bottom: 5px; }
      table { width: 100%; border-collapse: collapse; }
      table th, table td { border: 1px solid #ddd; padding: 8px; text-align: left; }
      table th { background-color: #f8f8f8; }
      .total-section { margin-top: 20px; width: 100%; text-align: right; }
      .total-section table { width: 300px; float: right; }
      
      /* New styles for bank/qr alignment */
      .payment-info { margin-top: 60px; font-size: 12px; }
      
      .footer { margin-top: 40px; font-size: 11px; text-align: center; color: #666; }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="header">
        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="160px" height="auto" viewBox="0 0 242088.19 61371.94">
          <defs>
             <style type="text/css">
               <![CDATA[
                .fil8 {fill:#FEFEFE} .fil0 {fill:black;fill-rule:nonzero} .fil2 {fill:url(#id0);fill-rule:nonzero} .fil5 {fill:url(#id1);fill-rule:nonzero} .fil7 {fill:url(#id2);fill-rule:nonzero} .fil6 {fill:url(#id3);fill-rule:nonzero} .fil3 {fill:url(#id4);fill-rule:nonzero} .fil1 {fill:url(#id5);fill-rule:nonzero} .fil4 {fill:url(#id6);fill-rule:nonzero}
               ]]>
             </style>
             <linearGradient id="id0" gradientUnits="userSpaceOnUse" x1="197532.14" y1="55179.17" x2="204448.97" y2="-1733.55"> <stop offset="0" style="stop-opacity:1; stop-color:#F58634"/> <stop offset="1" style="stop-opacity:1; stop-color:#ED3237"/> </linearGradient>
             <linearGradient id="id1" gradientUnits="userSpaceOnUse" xlink:href="#id0" x1="233727.1" y1="26366.53" x2="233941.91" y2="18086.72"> </linearGradient>
             <linearGradient id="id2" gradientUnits="userSpaceOnUse" xlink:href="#id0" x1="240830.33" y1="21669.82" x2="240907.44" y2="18696.7"> </linearGradient>
             <linearGradient id="id3" gradientUnits="userSpaceOnUse" xlink:href="#id0" x1="233045.26" y1="33341.63" x2="233159.42" y2="28937.99"> </linearGradient>
             <linearGradient id="id4" gradientUnits="userSpaceOnUse" xlink:href="#id0" x1="219737.38" y1="54183.96" x2="220840.42" y2="9282.67"> </linearGradient>
             <linearGradient id="id5" gradientUnits="userSpaceOnUse" xlink:href="#id0" x1="174774.41" y1="68220.77" x2="177022.16" y2="5282.31"> </linearGradient>
             <linearGradient id="id6" gradientUnits="userSpaceOnUse" xlink:href="#id0" x1="48877.96" y1="20102.22" x2="49554.71" y2="-5120.84"> </linearGradient>
          </defs>
          <g id="Layer_x0020_1">
             <g id="_1950916508832">
               <path class="fil0" d="M-0 49277.39m45482.49 -39702.43c-2043.52,0 -3386.29,1050.93 -4086.88,3094.45l-6013.85 24872.48 -5721.79 -27966.94 -8641.11 0 -5838.49 27966.94 -6714.45 -27966.94 -8465.91 0 11326.88 39702.43 7823.66 0 6188.83 -30419.07 6130.63 30419.07 7765.39 0 11268.37 -39702.43 -5021.27 0z"/>
               <path class="fil0" d="M66263.31 49286.03m26332.03 0l0 -18158.03c58.27,-8816.24 -4262.24,-13195.19 -13078.49,-13195.19 -8816.24,0 -13253.54,4378.95 -13253.54,13195.19l0 18158.03 7882.09 0 0 -19734.44c58.43,-3211.23 1809.96,-4787.63 5254.75,-4787.63 3444.79,0 5196.25,1576.4 5371.45,4787.63l0 15881.03c0,2452.13 1284.49,3678.27 3853.4,3853.4l3970.34 0z"/>
               <path class="fil0" d="M96098.79 49286.03m4028.61 -39702.43l-4028.61 0 0 39702.43 7765.31 0 0 -11268.37c0,-817.45 408.69,-1343 1226.14,-1518.05 992.43,0 1985.09,875.73 2977.67,2627.41l5488.23 10159.01 9341.79 0 -10801.33 -18333.16 10684.56 -11443.66 -9341.79 0 -9575.27 10976.54 0 -17106.94c0,-2043.6 -1693.1,-3795.21 -3736.7,-3795.21z"/>
               <path class="fil0" d="M122080.48 49286.03m27499.82 -9458.49l-5721.79 0c-1050.93,0 -1926.82,350.34 -2627.41,1109.36 -1517.97,1459.55 -3211.31,2218.73 -5021.19,2218.73 -3795.05,0 -5838.57,-2393.93 -6130.48,-7123.06l19967.99 0c583.82,-12085.9 -4028.69,-18099.76 -13837.51,-18099.76 -9400.06,58.43 -14129.42,5313.1 -14129.42,15822.53 0,10509.5 4670.86,15939.38 14012.64,16231.29 7590.18,0 11794,-3619.84 13487.18,-10159.09zm-13487.18 -15530.7c3327.93,0 5254.75,2102.02 5721.79,6188.91l-11618.79 0c583.82,-4086.88 2568.91,-6188.91 5897,-6188.91z"/>
               <path class="fil0" d="M153667.19 49286.03m4028.61 -39702.43l-4028.61 0 0 39702.43 7765.39 0 0 -35907.22c0,-2043.6 -1693.18,-3795.21 -3736.78,-3795.21z"/>
               <path class="fil1" d="M165811.68 49286.03m7765.39 8232.43c0,2568.91 -1284.57,3853.48 -3853.48,3853.48l-3911.91 0 0 -29543.19c408.69,-9225.09 5196.32,-13779.09 14479.61,-13779.09 9575.42,0 14363.06,5196.25 14363.06,15588.97 0,10509.43 -4087.04,15939.31 -12319.46,16231.22 -3853.48,0 -6772.73,-1576.4 -8757.82,-4787.63l0 12436.24zm6597.52 -14596.46c4203.82,0 6364.11,-2977.75 6539.24,-8933.02 0,-6247.34 -2218.73,-9341.79 -6655.95,-9341.79 -4437.3,0 -6539.24,3094.45 -6480.82,9341.79 233.48,5955.27 2393.7,8933.02 6597.52,8933.02z"/>
               <path class="fil2" d="M198274.18 49286.03m0 -39702.43l0 6072.21 7765.31 0 0 -2277c58.27,-2510.64 -1167.79,-3795.21 -3736.7,-3795.21l-4028.61 0zm0 8816.24l0 30886.18 7765.31 0 0 -27149.48c0,-2510.56 -1226.06,-3736.7 -3736.7,-3736.7l-4028.61 0z"/>
               <polygon class="fil3" points="225066.85,27063.19 225032.89,27121.16 219960.14,19470 219960.14,19470.16 219351.46,18400.24 210418.67,18400.24 219877.01,33463.43 209834.85,49286.03 219351.46,49286.03 224898.28,39477.51 230386.43,49286.03 239728.22,49286.03 "/>
               <path class="fil4" d="M48401.82 2376.1c-456.39,506.56 -132.06,1005.55 333.67,802.79 458.39,-199.98 301.63,-740.96 -333.67,-802.79zm9744.69 1163.01c-891.32,-400.12 -907.06,-148.27 -1490.88,-58.97 -1021.84,-1329.34 -1735.09,-1747.29 -3462.7,-2583.88 545.23,-1606.12 2014.65,-717.42 2986.16,72.24 825.02,670.73 1710.16,1834.89 1967.42,2570.61zm-8522.71 3135.98c424.36,-123.96 956.92,-620.94 1156.14,-1324.47 208.4,-736.41 -60.9,-1337.75 6.17,-1713.94 -135.38,1698.28 -342.46,3113.13 -2343.3,2830.95 -789.13,-111.22 -2743.88,-708.16 -3451.89,-1204.07 -203.15,-142.25 -290.98,-250.15 -469.82,-353.12 -576.72,-331.43 -475.61,32.19 -524.7,-544.76 -33.65,-398.42 -271.69,-541.91 -91.93,-802.94 497.53,-367.78 312.75,115.7 761.57,-367.55 1374.49,-1479.69 2950.97,-2651.34 5173.32,-2684.3 2677.74,-39.9 5410.35,1477.76 6883.64,3410.83 681.61,894.71 1149.19,2012.41 1349.94,3034.87 296.77,1510.95 162.01,2036.19 -341.54,3713.47 -195.51,652.2 -337.83,1324.01 -214.8,1905.28 186.17,880.67 2110.9,1813.74 1622.02,4672.01 -727.15,-428.45 -827.87,-1195.81 -1169.41,-1637.38 -504.63,468.74 -901.66,613.84 -1471.05,769.99 -1128.04,309.2 -924.12,636.69 -1355.58,972.05 -123.8,-601.11 -11.96,-1201.98 274.93,-1902.89l34.27 -83.51c518.29,-1265.27 1622.33,-2281.32 1435.46,-3563.04 -163.48,-1124.34 -1046.38,-1609.51 -2209.39,-2393.7l37.82 -680.53c-176.06,512.73 -170.27,724.68 -640.63,991.89 -663.24,376.81 -423.04,437.25 -716.42,558.27 -648.11,-849.25 -1016.67,-1746.59 -664.01,-3118.92l-400.2 494.13c-1592.77,-813.59 -759.87,-518.13 -2670.64,-978.61z"/>
               <polygon class="fil0" points="226996.67,24521.45 232217.93,24521.45 232217.93,30217.31 226996.67,30217.31 "/>
               <polygon class="fil5" points="232008.45,19767.86 237229.86,19767.86 237229.86,25463.64 232008.45,25463.64 "/>
               <polygon class="fil6" points="232131.1,29832.08 234908.17,29832.08 234908.17,32861.47 232131.1,32861.47 "/>
               <polygon class="fil0" points="236912.94,16275.44 240473.97,16275.44 240473.97,20160.34 236912.94,20160.34 "/>
               <polygon class="fil7" points="240213.17,19300.43 242088.19,19300.43 242088.19,21345.65 240213.17,21345.65 "/>
               <path class="fil0" d="M53473.26 18218.47l0 31067.49 7765.31 0 0 -28835.02 -11.58 -1739.72c-1083.35,311.67 -2243.35,580.81 -3714.39,-169.73 -1471.12,-750.54 -3262.33,-631.36 -4039.34,-323.01z"/>
               <path class="fil8" d="M56492.15 19060.77c322.17,0 583.43,252.47 583.43,565.06 0,312.75 -261.27,565.22 -583.43,565.22 -322.17,0 -583.43,-252.47 -583.43,-565.22 0,-312.59 261.27,-565.06 583.43,-565.06z"/>
               <path class="fil8" d="M56492.15 19060.77c322.17,0 583.43,252.47 583.43,565.06 0,312.75 -261.27,565.22 -583.43,565.22 -322.17,0 -583.43,-252.47 -583.43,-565.22 0,-312.59 261.27,-565.06 583.43,-565.06z"/>
               <path class="fil8" d="M59016.13 20552.27c644.25,0 1166.86,506.48 1166.86,1131.05 0,625.34 -522.61,1131.82 -1166.86,1131.82 -644.1,0 -1166.09,-506.48 -1166.09,-1131.82 0,-624.57 521.99,-1131.05 1166.09,-1131.05z"/>
               <path class="fil8" d="M59016.13 20552.27c644.25,0 1166.86,506.48 1166.86,1131.05 0,625.34 -522.61,1131.82 -1166.86,1131.82 -644.1,0 -1166.09,-506.48 -1166.09,-1131.82 0,-624.57 521.99,-1131.05 1166.09,-1131.05z"/>
               <path class="fil8" d="M56827.66 21344.72c164.25,0 296.54,128.82 296.54,287.51 0,159.38 -132.29,288.44 -296.54,288.44 -164.02,0 -297,-129.05 -297,-288.44 0,-158.69 132.99,-287.51 297,-287.51z"/>
               <path class="fil0" d="M15054.32 61002.69l-2501.99 -8360.78 1621.79 0 1482.55 5841.27 23.23 0 1471.12 -5841.27 1158.14 0 1436.55 5841.27 23.16 0 1494.2 -5841.27 1621.63 0 -2490.41 8360.78 -1262.42 0 -1390.23 -5524.89 -23.08 0 -1413.24 5524.89 -1251 0zm9700.77 -4157.81c0,-1227.76 440.26,-2263.42 1320.62,-3107.03 880.28,-843.62 1934.23,-1265.51 3162.22,-1265.51 1227.76,0 2281.94,421.89 3162.22,1265.51 880.51,843.62 1320.38,1879.27 1320.38,3107.03 0,1197.58 -438.02,2218.26 -1314.59,3061.8 -876.42,843.62 -1932.45,1265.35 -3168.01,1265.35 -1235.64,0 -2291.66,-421.73 -3168.01,-1265.35 -876.58,-843.54 -1314.83,-1864.22 -1314.83,-3061.8zm1586.98 -11.35c0,783.42 279.87,1461.24 839.76,2033.64 559.81,572.63 1245.28,858.75 2056.1,858.75 810.97,0 1496.21,-286.12 2056.1,-858.75 559.89,-572.4 839.68,-1250.22 839.68,-2033.64 0,-805.95 -281.72,-1493.2 -845.47,-2061.89 -563.9,-568.69 -1247.29,-852.96 -2050.31,-852.96 -803.02,0 -1486.56,284.27 -2050.39,852.96 -563.6,568.69 -845.47,1255.94 -845.47,2061.89zm9979.02 4169.16l0 -8360.78 2629.34 0c911.23,0 1606.2,188.25 2084.89,564.83 671.96,527.4 1007.71,1201.44 1007.71,2022.45 0,821 -274.08,1487.56 -822.39,1999.91 -331.97,316.38 -806.88,546.08 -1424.66,689.1l2328.25 3084.5 -1934.46 0 -2281.86 -3197.42 0 0 0 3197.42 -1586.82 0zm1586.82 -6914.67l0 2553.47 1019.29 0c579.19,0 996.21,-158.15 1251.07,-474.53 185.16,-225.99 277.94,-497.22 277.94,-813.36 0,-308.97 -100.42,-576.41 -301.09,-802.4 -270.3,-308.66 -679.6,-463.18 -1227.92,-463.18l-1019.29 0zm6700.79 6914.67l0 -8360.78 1586.82 0 0 6914.59 2617.84 0 0 1446.19 -4204.67 0zm6469.08 0l0 -8360.78 1946.04 0c1575.4,0 2749.21,323.86 3521.28,971.59 417.1,346.48 753.01,806.03 1007.71,1378.5 270.37,595.01 405.45,1212.63 405.45,1852.87 0,753.24 -187.25,1461.24 -561.74,2124.1 -374.5,662.85 -870.63,1160 -1488.41,1491.35 -671.89,361.53 -1621.86,542.37 -2849.47,542.37l-1980.85 0zm1586.98 -6914.67l0 5468.47 335.75 0c880.51,0 1575.48,-135.53 2085.04,-406.76 409.31,-218.51 729.93,-546.08 961.48,-982.94 216.35,-414.25 324.25,-854.97 324.25,-1321.93 0,-836.13 -305.03,-1521.52 -915.01,-2056.25 -532.65,-467.12 -1362.99,-700.6 -2490.41,-700.6l-301.09 0zm10893.8 2756.85c0,-1227.76 440.26,-2263.42 1320.54,-3107.03 880.36,-843.62 1934.3,-1265.51 3162.3,-1265.51 1227.76,0 2281.86,421.89 3162.22,1265.51 880.51,843.62 1320.38,1879.27 1320.38,3107.03 0,1197.58 -438.02,2218.26 -1314.59,3061.8 -876.42,843.62 -1932.45,1265.35 -3168.01,1265.35 -1235.64,0 -2291.66,-421.73 -3167.86,-1265.35 -876.58,-843.54 -1314.98,-1864.22 -1314.98,-3061.8zm1586.98 -11.35c0,783.42 279.87,1461.24 839.91,2033.64 559.81,572.63 1245.13,858.75 2055.95,858.75 810.97,0 1496.21,-286.12 2056.1,-858.75 559.81,-572.4 839.84,-1250.22 839.84,-2033.64 0,-805.95 -281.88,-1493.2 -845.63,-2061.89 -563.75,-568.69 -1247.14,-852.96 -2050.31,-852.96 -803.02,0 -1486.56,284.27 -2050.39,852.96 -563.6,568.69 -845.47,1255.94 -845.47,2061.89zm9944.13 4169.16l0 -8360.78 4366.91 0 0 1446.12 -2779.93 0 0 2045.14 2652.5 0 0 1446.12 -2652.5 0 0 3423.41 -1586.98 0zm16558.32 -2327.48l1841.68 0c-331.97,753.24 -866.7,1357.74 -1604.11,1813.28 -737.57,455.69 -1523.15,683.54 -2357.19,683.54 -1227.99,0 -2280.09,-433.08 -3156.51,-1299.16 -876.35,-866.16 -1314.75,-1894.32 -1314.75,-3084.57 0,-1167.48 432.38,-2178.59 1297.31,-3033.63 864.84,-854.81 1911.3,-1282.33 3139.14,-1282.33 795.3,0 1544.29,195.97 2247.05,587.6 810.97,459.4 1409.45,1114.77 1795.45,1965.87l-1806.8 0c-656.6,-738.11 -1421.03,-1107.12 -2293.67,-1107.12 -718.2,0 -1355.27,271.15 -1911.23,813.36 -586.83,572.4 -880.28,1265.51 -880.28,2078.87 0,783.49 283.73,1465.18 851.26,2045.06 567.69,579.88 1233.71,869.94 1998.21,869.94 756.79,0 1474.83,-350.18 2154.43,-1050.7zm4268.42 2327.48l0 -8360.78 2629.34 0c911.31,0 1606.2,188.25 2085.04,564.83 671.81,527.4 1007.71,1201.44 1007.71,2022.45 0,821 -274.23,1487.56 -822.55,1999.91 -331.97,306.38 -806.73,546.08 -1424.66,689.1l2328.25 3084.5 -1934.46 0 -2281.86 -3197.42 0 0 0 3197.42 -1586.82 0zm1586.82 -6914.67l0 2553.47 1019.29 0c579.19,0 996.37,-158.15 1251.07,-474.53 185.16,-225.99 277.94,-497.22 277.94,-813.36 0,-308.97 -100.42,-576.41 -301.09,-802.4 -270.3,-308.66 -679.6,-463.18 -1227.92,-463.18l-1019.29 0zm6573.36 6914.67l0 -8360.78 4610.11 0 0 1446.12 -3023.29 0 0 2045.14 2896.01 0 0 1446.12 -2896.01 0 0 1977.22 3023.29 0 0 1446.19 -4610.11 0zm6874.38 0l3567.82 -8360.78 1239.34 0 3590.75 8360.78 -1748.91 0 -915.32 -2158.06 -3069.45 0 -915.17 2158.06 -1749.06 0zm4170.16 -6180.26l-973.13 2564.82 1969.11 0 -972.9 -2564.82 -23.08 0zm7453.56 6180.26l0 -6914.67 -1586.82 0 0 -1446.12 4772.28 0 0 1446.12 -1598.48 0 0 6914.67 -1586.98 0zm5519.41 0l0 -8360.78 1586.67 0 0 8360.78 -1586.67 0zm7314.71 0l-3336.04 -8360.78 1667.87 0 2293.44 6360.87 23.31 0 2305.17 -6360.87 1667.87 0 -3324.31 8360.78 -1297.31 0zm6990.23 0l0 -8360.78 1586.82 0 0 8360.78 -1586.82 0zm5542.57 0l0 -6914.67 -1586.98 0 0 -1446.12 4772.28 0 0 1446.12 -1598.32 0 0 6914.67 -1586.98 0zm7476.64 0l0 -3084.5 -2814.59 -5276.29 1737.33 0 1865.15 3841.44 1876.34 -3841.44 1749.22 0 -2826.47 5276.29 0 3084.5 -1586.98 0z"/>
             </g>
           </g>
        </svg>
        <div class="invoice-title">INVOICE</div>
      </div>

      <div class="company-info">
        <div>GST NO: 24GYRPS9764Q1ZT | PAN: GYRPS9764Q</div>
        <div>Phone: 8733019208</div>
      </div>

      <div class="bill-info">
        <div class="section-title">BILL TO</div>
        <div><strong>${clientName}</strong></div>
        ${gstApplied ? `<div>GST NO: ${clientGST}</div>` : ""}
        <div>${clientAddress}</div>
      </div>

      <div class="invoice-info">
        <div>Invoice Number: <strong>${invoiceNumber}</strong></div>
        <div>Invoice Date: <strong>${billingDate}</strong></div>
      </div>

      <div class="section-title">JOB DETAILS</div>
      <table>
        <thead>
          <tr>
            <th>Description</th>
            <th>Amount ()</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>${jobDescription}</td>
            <td>${numericAmount.toFixed(2)}</td>
          </tr>
        </tbody>
      </table>

      <div class="total-section">
        <table>
          ${gstApplied ? `
          <tr>
            <td>+ C GST 9%</td>
            <td>${cgst.toFixed(2)}</td>
          </tr>
          <tr>
            <td>+ S GST 9%</td>
            <td>${sgst.toFixed(2)}</td>
          </tr>
          ` : ""}
          <tr>
            <th>Total Amount</th>
            <th>${totalAmount.toFixed(2)}</th>
          </tr>
        </table>
      </div>

      ${extraNotes ? `<div class="section-title">Notes</div><p>${extraNotes}</p>` : ""}

      <div class="payment-info">
        ${gstApplied ? bankDetailsHtml : qrCodeHtml}
      </div>

      <div class="footer">
        12A, 4th floor, Nakshatr Mall, IOC Rd, opposite Manikrupa School, Chandkheda, Ahmedabad, Gujarat - 382424
      </div>
    </div>
  </body>
  </html>
`;

    const browser = await puppeteer.launch({ args: ["--no-sandbox", "--disable-setuid-sandbox"] });
    const page = await browser.newPage();
    await page.setContent(htmlContent, { waitUntil: "networkidle0" });
    const pdfBuffer = await page.pdf({ format: "A4", printBackground: true });
    await browser.close();

    return new NextResponse(new Uint8Array(pdfBuffer), {
      status: 200,
      headers: {
        "Content-Type": "application/pdf",
        "Content-Disposition": `inline; filename=invoice-${invoiceNumber}.pdf`,
      },
    });

  } catch (err: any) {
    console.error(err);
    return NextResponse.json({ error: err.message }, { status: 500 });
  }
}